# unbind ctl-b and bind to Ctl-b >> karabiner translates to capslock-a
unbind C-b
set -g prefix C-b
bind C-b send-prefix

# colorful terminal
set -g default-terminal "xterm-256color-italic"
set -ga terminal-overrides ",xterm-256color-italic:Tc"
set -g default-shell "/usr/local/bin/zsh"

set -g default-command "${SHELL}"

set -g renumber-windows on
setw -g mode-keys vi

set -g base-index 1
setw -g pane-base-index 1

set -g history-limit 500000
set -s escape-time 0

##################################
## key binding                  ##
## -n : no prefix               ##
## -t <keytable>                ##
##################################
# reload config file
bind r source-file ~/.tmux.conf \; display "Config Reloaded!"

# quickly open a new window
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

bind | split-window -h
bind - split-window -v

bind -t vi-copy v begin-selection
bind -t vi-copy y copy-pipe "reattach-to-user-namespace pbcopy"

unbind -t vi-copy Enter
bind -t vi-copy Enter copy-pipe "reattach-to-user-namespace pbcopy"

# Buffers to/from Mac clipboard, yay tmux book from pragprog
bind C-c run "tmux save-buffer - | reattach-to-user-namespace pbcopy"
bind C-v run "tmux set-buffer $(reattach-to-user-namespace pbpaste); tmux paste-buffer"

EXE_UPTIME="#(uptime | sed 's/,//g' | awk '{print $2,$3,$4}')"
EXE_TIME='#(TZ=Europe/Berlin date +"%F｜%R")'
EXE_LOAD='#(uptime | cut -d "," -f 3- | cut -d ":" -f2 | sed -e "s/^[ \t]*//")'

set -g status-keys vi

set -g status on
set -g status-interval 30
set -g status-position bottom
set -g status-justify left
set -g status-bg "$COLOR_BG"
set -g status-fg "$COLOR_FG"
set -g status-attr dim
#
# panes
set -g pane-border-fg "$COLOR_PANE_BORDER"
set -g pane-active-border-fg "$COLOR_ACTIVE_PANE_BORDER"

# status bar
set -g status-left "" # "$COLOR_LEFT_1 #S $COLOR_LEFT_2 $EXE_UPTIME "
set -g status-right "$COLOR_SPARK $COLOR_RIGHT_1 $EXE_LOAD $COLOR_RIGHT_2 $EXE_UPTIME " #$EXE_TIME"
set -g status-left-length 100

setw -g window-status-current-fg "$COLOR_WIN_CURRENT_FG"
setw -g window-status-current-bg "$COLOR_WIN_CURRENT_BG"
setw -g window-status-current-attr default
setw -g window-status-current-format ' #I:#W '

setw -g window-status-fg "$COLOR_WIN_FG"
setw -g window-status-bg "$COLOR_WIN_BG"
setw -g window-status-attr default
setw -g window-status-format ' #I:#W '

setw -g window-status-bell-attr bold
setw -g window-status-bell-fg "$COLOR_BELL_FG"
setw -g window-status-bell-bg "$COLOR_BELL_BG"

#####################
##  MOUSE CONTROL  ##
#####################
set -g mouse on

##################################
##  colorscheme                 ##
# main
COLOR_BG='colour236'
COLOR_FG='colour001'
COLOR_PANE_BORDER='black'
COLOR_ACTIVE_PANE_BORDER='brightred'
# window selector
COLOR_WIN_CURRENT_BG='colour001'
COLOR_WIN_CURRENT_FG='colour007'
COLOR_WIN_BG='colour236'
COLOR_WIN_FG='colour008'
# left
COLOR_LEFT_1='#[bg=colour004]#[fg=colour000]'
COLOR_LEFT_2='#[bg=colour000]#[fg=colour008]'
# right
COLOR_SPARK='#[bg=black]#[fg=colour003] ⚡'
COLOR_RIGHT_1='#[bg=colour000]#[fg=colour008]'
COLOR_RIGHT_2='#[bg=colour004]#[fg=colour000]'
# bell
COLOR_BELL_FG='black'
COLOR_BELL_BG='yellow'
