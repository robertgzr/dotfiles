#!/bin/sh

ZET_DIR=$HOME/wiki

case "$1" in
    ls|l)
        shift
        fzfez vimwiki "$@"
        ;;

    new|n)
        f=${2:-/dev/stdout}
        {
            echo "---";
            yq n date "$(date -Iseconds)" \
            | yq w - title "$2";
            echo "---";
            echo "";
        } >> "$f"
        [ "$f" = "/dev/stdout" ] && exit
        nvim "$f"
        ;;

    *) nvim "+VimwikiIndex" ;;
esac
